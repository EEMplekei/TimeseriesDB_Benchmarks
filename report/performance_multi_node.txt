G

MULTI-NODE

PERFORMANCE EVALUATION: DISK SIZE

After the successful completion of data insertion into the respective database clusters and subsequent result collection, our investigation progressed to a comparative evaluation of the stored database files on individual data nodes.

The storage mechanism driving our InfluxDB cluster is the InfluxDB Time-Structured Merge Tree (TSM), elucidated in the preceding single-node comparison.

The graphical representation below illustrates the distribution of database sizes across the two data nodes. Reiterating our observations, we note a noteworthy reduction in the cumulative database size in InfluxDB compared to TimescaleDB, attributable to InfluxDB's inherent compression. Additionally, a uniform distribution of the database size across the two data nodes is evident.

Similarly, within the TimescaleDB environment, the database size exhibits an equitable distribution across the two data nodes. Nevertheless, the total database size is substantially larger, primarily attributed to TimescaleDB's default absence of data compression, as underscored in our earlier single-node comparison.

[PNG Disk size Multi - Node]




PERFORMANCE EVALUATION: WRITE OPERATIONS

To evaluate the insertion performance of each database cluster, we utilized bash scripts provided by the Time Series Benchmark Suite (TSBS), following a similar approach as in the single node comparison. Notably, we adjusted the replication factor parameter in both scripts to ensure data distribution across all data nodes. Additionally, we modified the --do-create-db parameter to false in the load_timescale.sh script, facilitating the loading of data into pre-configured and empty TimescaleDB databases with a clustered setup.

Subsequently, we scrutinized the output files generated during the process and constructed performance graphs. A Python script was employed to compare the ingestion rates in terms of rows per second and metrics per second for each database at various sizes. The resulting visual representations are presented below:

In terms of rows rate, InfluxDB demonstrates a peak performance for large dataset sizes, reaching 135.08K rows/sec. In comparison, TimescaleDB exhibits a noticeable reduction at 96.34K rows/sec for the same dataset, reflecting a substantial decrease of 28%. In scenarios involving smaller datasets, the disparity between the two databases diminishes, with TimescaleDB achieving a rate of 82.86K metrics/sec and InfluxDB registering 80.63K metrics/sec. In the context of larger datasets, TimescaleDB has a rate of 101.1K rows/sec while InfluxDB has a rate of 124.85K rows/sec making it 19% faster for the corresponding dataset.

Regarding the metric rate, InfluxDB consistently surpasses TimescaleDB, exhibiting a substantial increment across all datasets. In particular, InfluxDB attains its maximum at 1067.98K metrics/sec for the medium dataset, while TimescaleDB peaks out at 505.48K metrics/sec for the large dataset.

[PNG - WRITE MULTI NODE]

At this juncture, it's reasonable to assert that the insertion speeds of both InfluxDB and TimescaleDB experienced significant enhancements, measured in both rows per second and metrics per second, with the transition to a 3-node cluster. This notable increase in performance metrics stands out when compared to the insertion speeds observed in the single-node configuration.


PERFORMANCE EVALUATION: AVERAGE QUERY EXECUTION 
To assess query performance across individual database clusters, we systematically collect data and generate bar graphs representing two scenarios, mirroring the single-node testing approach. The first scenario involves a single query per query type, with the average execution time recorded. In the second scenario, ten consecutive queries per query type are executed. The resulting graphs visually depict the mean execution time for all query types across three distinct datasets (small, medium, large) in both scenarios.

In the tests involving ten consecutive queries per query type, InfluxDB cluster consistently demonstrates significantly better query time execution on average. The performance gap between the two databases widens notably for the large dataset. Specifically, the InfluxDB cluster surpasses the TimescaleDB cluster by 4.67 times for the small dataset, 4.5 times for the medium dataset, and 6.6 times for the large dataset. 

[PNG - AVG QUERY MULTI NODE]

However, it's important to note that this average may not accurately represent overall performance, as it is influenced largely by three specific query types—high-load, last-loc, and low-fuel—where TimescaleDB exhibits significantly higher execution times. Hence, a comprehensive analysis evaluating the effectiveness of databases based on query types will be presented towards the end of this section, providing a concise summary of the performance associated with each query type.

Similarly to the single node testing, graphs show that for large datasets, Influx outperforms Timescale, diverging from public benchmarks. Previous studies suggest Influx excels in smaller databases, but hardware limitations may impede scaling up data for experiments. However, our analysis should prioritize insights from our experiments.


PERFORMANCE EVALUATION: QUERY TYPE EXECUTION